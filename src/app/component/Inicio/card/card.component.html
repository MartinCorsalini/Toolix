@if (usuario?.rol === 'Admin') {
  <div class="grid-container">
    <h2>Listado de trabajadores</h2>
  </div>
}

<!-- Filtro de Todos o Favoritos -->
<div class="center-container">
  <select
    class="form-control estado-filtro"
    [(ngModel)]="filtroSeleccionado"
    (change)="filtrarFavs()"
  >
    <option value="Todos">Todos</option>
    <option value="Favoritos">Favoritos</option>
  </select>
</div>

<div class="grid-container">
  <!-- Tarjetas de trabajadores filtradas -->
  <div *ngFor="let usuario of usuariosFiltrados; trackBy: trackById">
    <div *ngIf="usuario.rol === 'Trabajador'" class="card">
      <div class="image">
        <img src="assets/avatar/avatar.png" alt="Imagen de perfil" class="profile-img" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
      </div>

      <div class="info">
        <h4>{{usuario.nombre}}</h4>
        <div>{{usuario.profesion}}</div>
        <ul>
          <li>Disponibilidad: {{usuario.disponibilidad}}</li>
          <li>Zona: {{usuario.zona}}</li>
        </ul>
      </div>

      <hr>
      <div class="actions">
        <button class="detalles-button" (click)="irADetalles(usuario.id!)">Detalles</button>

        <button
          class="heart-button"
          [class.favorito]="usuario.isFavorito"
          (click)="toggleFavorito(usuario.id!)"
        >
          <i class="fas fa-heart"></i>
        </button>

        <div class="perfil-rating">
          <p class="rating-title">Puntuaci√≥n</p>
          <span class="rating-value">{{ calcularPromedioValoracion(usuario.valoraciones) | number:'1.1-1' }}</span>
          <div class="rating-stars">
            <ng-container *ngFor="let star of stars">
              <span *ngIf="star === 1">&#9733;</span>
              <span *ngIf="star === 0.5">&#x272E;</span>
              <span *ngIf="star === 0">&#9734;</span>
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

@if (usuario?.rol === 'Admin') {
  <div class="grid-container">
    <h2>Listado de clientes</h2>
  </div>

  <div class="grid-container">
    <!-- Tarjetas de clientes -->
    <div *ngFor="let usuario of usuariosFiltrados; trackBy: trackById">
      <div *ngIf="usuario.rol === 'Cliente'" class="card">
        <div class="image">
          <img src="assets/avatar/avatar.png" alt="Imagen de perfil" class="profile-img" />
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        </div>

        <div class="info">
          <h4>{{usuario.nombre}}</h4>
          <div>{{usuario.profesion}}</div>
          <ul>
            <li>Email: {{usuario.email}}</li>
          </ul>
        </div>

        <hr>
        <div class="actions">
          <button class="detalles-button" [routerLink]="['/perfil-trabajador',usuario.id]">Detalles</button>
        </div>
      </div>
    </div>
  </div>
}