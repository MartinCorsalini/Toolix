<app-navbar-admin></app-navbar-admin>
<div class="perfil-container">
    <div class="perfil-box">
      <div class="perfil-header">
        <img [src]="fotoUrl" alt="Foto de perfil" class="perfil-foto">
        <div class="perfil-info">
          <h2>{{ usuario?.nombre }}</h2>
          <p *ngIf="usuario?.rol == 'Trabajador'" class="profesion">{{ usuario?.profesion }}</p>
  
         <div *ngIf="usuario?.rol == 'Trabajador'" class="perfil-rating">
          <span>Valoración: </span>
          <span>{{ calcularPromedioValoracion() | number:'1.1-1' }}</span>
          <ng-container *ngFor="let star of stars">
            <span *ngIf="star === 1">&#9733;</span>       <!-- Estrella llena -->
            <span *ngIf="star === 0.5">&#x272E;</span>    <!-- Media estrella (estrella de diferente estilo) -->
            <span *ngIf="star === 0">&#9734;</span>       <!-- Estrella vacía -->
          </ng-container>
        </div>
  
        </div>
      </div>
  
      <div class="perfil-detalles">
        <p><strong>Email:</strong> {{ usuario?.email }}</p>
        <!-- <p><strong>Teléfono:</strong> {{ usuario.telefono }}</p> -->
        <p *ngIf="usuario?.rol == 'Trabajador'"><strong>Disponibilidad:</strong> {{ usuario?.disponibilidad }}</p>
        <p *ngIf="usuario?.rol == 'Trabajador'"><strong>Zonas de trabajo:</strong> {{ usuario?.zona }}</p>
        <p *ngIf="usuario?.rol == 'Trabajador'"><strong>Descripción:</strong> {{ usuario?.descripcion }}</p>
  
        <button *ngIf="usuario?.rol == 'Trabajador'" class="valoracion-btn" (click)="mostrarInput()">Agregar Valoración</button>
  
        <!-- Input y botón para enviar valoración, visibles cuando `mostrarValoracionInput` es true -->
        <div *ngIf="mostrarValoracionInput">
          <input
            type="number"
            [(ngModel)]="valoracion"
            placeholder="Ingrese su valoración (1-10)"
            (blur)="validarValoracion()"
            class="valoracion-input"
            min="1"
            max="10"
          />
          <button  (click)="cargarValoracionDB()" class="valoracion-btn">Cargar valoración</button>
        </div>
  
        <div class="botones">
          <button *ngIf="usuario?.rol == 'Trabajador'" (click)="irAreservar(usuario?.id!)" >Reservar</button>
          <button [routerLink]="['/homeAdmin', usuario?.id]">Atrás</button>
          <button [routerLink]="['/eliminar-cuentas-admin', usuario?.id]">Eliminar cuenta</button>
        </div>
  
      </div>
    </div>
  </div>
  